
<html>
<head>


	<script type='text/javascript' src='javascript/unsplash.js'></script>
	<link href="css/style.css" rel="stylesheet" />
	<script src="js/md5.js"></script>
	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="js/lightbox.min.js"></script>
	<link href="css/lightbox.css" rel="stylesheet" />
	<script src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="css/bootstrap.min.css">

</head>
<body>

	<nav class='navbar navbar-inverse navbarBackground'>
		<div class="navbar-header">
		      <a class="navbar-brand navlink" href="index.html">Zachary Charnell</a>
		  </div>
		<ul class='nav navbar-nav'>
			<li class='active'><a href="index.html" class='navlink'>Home</a></li>
      <li><a href="index.html#photouploader" class='navlink'>Photo Uploader</a></li>
			<li><a href="index.html#visWindow" class='navlink'>Music Visualizer</a></li>
      <li class="dropdown">
        <a href="index.html" class="dropdown-toggle navlink" data-toggle="dropdown" role="button" aria-expanded="false">Games<span class="caret"></span></a>
        <ul class="dropdown-menu" role="menu">
          <li><a href="index.html#allgames">All Games</a></li>
          <li class="divider"></li>
          <li><a href="index.html#virt-arena">Virtual Arena</a></li>
          <li><a href="index.html#warring-states">Warring States</a></li>
          <li class="divider"></li>
          <li><a href="index.html#coh2-guide">Prima eGuide</a></li>
        </ul>
      </li>
		</ul>
	</nav>

	<div class="container">
		   <div class="jumbotron text-center">
			<h1 id='header'> Zachary Charnell </h1>
			<h4 id='header'> Front-End Web Programmer </h4>
		    <!--<a href=login.html>Login/Sign up</a>-->
		</div>
	</div>

<div class='container'>
	<div class='col-md-6'>
		<h2 class='center'><a href='index.html#visualizer'>Music Visualizer</a></h2>
		<a href='index.html#visualizer'><img src='/img/visualizer.jpg' class='project-image'></a><br>
	</div>

	<div class='col-md-6'>
		<h2 class='center'><a href='index.html#virt-arena'>Virtual Arena</a></h2>
		<a href='index.html#virt-arena'><img src='/img/VirtArenaScreenshot.jpg' class='project-image'></a><br>
	</div>

	<div class='col-md-6'>
		<h2 class='center'><a href='index.html#photouploader'>Photo Uploader</a></h2>
		<a href='index.html#photouploader'><img src='/img/photouploader.jpg' class='project-image'></a><br>
	</div>

	<div class='col-md-6'>
		<h2 class='center'><a href='index.html#warring-states'>Warring States</a></h2>
		<a href='index.html#warring-states'><img src='/img/IberiaProject.jpg' class='project-image'></a><br>
	</div>
</div>
<hr>
<div id='photouploader'>
		    <div class="jumbotron text-center">
				<h1 id='header'> Photo Uploader </h1>
				<h4 id='header'> Javascript with MongoDB database and AWS S3 image hosting</h4>
		    	<input style='margin-left: auto; margin-right: auto' type='file' id='fileUpload'>
		    	<br>
			    <input type='text' id='photoName' placeholder='Photo name'>
			    <br>
			    <input type="checkbox" name="category" id='landscapeCheckbox' value="Landscape">Landscape
			    <input type="checkbox" name="category" id='foodCheckbox' value="Food">Food
			    <input type="checkbox" name="category" id='animalsCheckbox' value="Animals">Animals
			    <input type="checkbox" name="category" id='selfieCheckbox' value="Selfie">Selfie
			    <input type="checkbox" name="category" id='otherCheckbox' value="Other">Other
			    <br>
		    	<button id='uploadButton' onclick="addNew()">Upload Photo</button>
				<hr>
				<input type="text" id="searchText" placeholder="Search name or tag." name="q">
		      <button onclick="searchTags()" class="btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button>
		      <br><button onclick="updateList()">Show All Photos</button>
		      <p id='numResults'></p>
				<!--<button onclick="updateList()">My Photos</button>-->
			</div>

		<div class='container'>
			<div id="list"> 
				No photos to show.
			</div>
		</div>
</div>

<hr>


<div class="experiment text-center" style="background-image: url('/img/visualizer.jpg')" id="visWindow">
	<div style='background-color: rgb(225,225,225); padding-top: 1px; padding-bottom: 20px'>
		<h1 class='center'>Music Visualizer</h1>
		<p class='center'>(May not work on mobile; try Chrome on Desktop)</p>
			<p>Color Display
			<select style='margin-left: auto; margin-right: auto' id='colorSelect' onChange='changeColor()'>
				<option value="default">Default</option>
			  <option value="electronic">Electronic</option>
			  <option value="relaxing">Relaxing</option>
			  <option value="pop">Pop</option>
			  <option value="rock">Rock</option>
			</select></p>
			<button type='button' onClick="changeAudio('pop.mp3')">Maroon 5 (Pop)</button>
			<button type='button' onClick="changeAudio('rock.mp3')">Before I Die (Rock)</button>
			<button type='button' onClick="changeAudio('relaxing.mp3')">Enya (Relaxing)</button>
			<button id='startstop' class='glyphicon glyphicon-play' onClick='startAudio()'></button>
			<!--<input type='file' id='fileUpload' onChange='changeAudio()'>-->
		</div>

		<div id='initiator' class="initiator"></div>
		<div id="bars" class="area"></div>
	</div>
	<audio id='audioIn' src='pop.mp3'></audio>


<script>
var barColor = 'linear-gradient(rgb(0,0,0), rgb(200,200,200))';
		var globalFFTSize = 256;
		var vis = document.querySelectorAll('.initiator');
		var visual = null;
		var lastVisWindow;
		var lastVisWindowParentId;

		window.AudioContext = window.AudioContext || window.webkitAudioContext || window.mozAudioContext;

		var renderers = {
			'visWindow': (function() {
				var barsArr = [],
					initialized = false,
					bars,
					count,
					width;

				var height = 0;

				var init = function(config) {
					count = config.count;
					count -= 10;
					width = config.width;
					var barWidth = (width/count) >> 0;
					height = config.height;

					bars = document.getElementById('bars');
					initialized = true;
				};
				var max = 256;

				var renderFrame = function(frequencyData) {
					var freqData = '';
					var myNode = document.getElementById("bars");
					while (myNode.firstChild) {
					    myNode.removeChild(myNode.firstChild);
					}
					barsArr = [];
					var barWidth = (width/count) >> 0;
					for(var i=0; i<count; i++) {
						if(frequencyData[i] > 0) {
							var nunode = document.createElement('div');
							nunode.classList.add('bar');
							nunode.style.width = barWidth + 'px';
							nunode.style.left = ((barWidth+2) * i) + 'px';
							nunode.style.background = barColor;
							barsArr.push(nunode);
							bars.appendChild(nunode);
						}
					}
					for(var i = 0; i < barsArr.length; i++) {
						var bar = barsArr[i];
						bar.style.height = ((frequencyData[i]/max)*height + 'px');
						freqData += '[' + frequencyData[i] + '],';
					}
				};


				return {
					init: init,
					isInitialized: function() {
						return initialized;
					},
					renderFrame: renderFrame
				}
			})()
		}

		function startAudio(){
			var visWindow = vis[0];
			var id = visWindow.parentNode.id;

			if (!visual) {
				visual = new Visualization({renderer: renderers[id] });
			}
			visual.setRenderer(renderers[id]);
			if (visual.isPlaying()) {
				visual.stop();
				visWindow.style.backgroundColor = 'rgba(255,255,255,0.5)';
				document.getElementById('startstop').className = 'glyphicon glyphicon-play'
			} else {
				visual.start();
				visWindow.style.backgroundColor = 'rgba(0,0,0,0)';
				document.getElementById('startstop').className = 'glyphicon glyphicon-pause'
			}
			lastVisWindowParentId = id;
			lastVisWindow = visWindow;
			document.getElementById('visWindow').style.background = "rgba(0,0,0,0)";
		}

		function Visualization(config) {
			var audio,
				audioStream,
				analyser,
				source,
				audioCtx,
				canvasCtx,
				frequencyData,
				running = false,
				renderer = config.renderer,
				rect = document.getElementById('initiator').getBoundingClientRect(),
				width = window.innerWidth-(64*2),
				height = 500;
				console.log('width: ' + width);
				if(window.innerHeight < 500) height = window.innerHeight-rect.top;

				//width = config.width || 1200,
				//height = config.height || 600;

			var init = function() {
				audio = document.getElementById('audioIn');
				audioCtx = new AudioContext();
				analyser = audioCtx.createAnalyser();
				console.log('FrequencyBinCount: ' + analyser.frequencyBinCount);
				console.log('Sample rate: ' +audioCtx.sampleRate + 'hz');
				source =  audioCtx.createMediaElementSource(audio);
				source.connect(analyser);
				analyser.connect(audioCtx.destination);
				analyser.fftSize = globalFFTSize;
				console.log('FFT size: ' + analyser.fftSize);
				frequencyData = new Uint8Array(analyser.frequencyBinCount);
				renderer.init({
					count: analyser.frequencyBinCount,
					width: width,
					height: height
				});
			};
			this.start = function() {
				audio.play();
				running = true;
				renderFrame();
				console.log('Start!');
			};
			this.stop = function() {
				running = false;
				audio.pause();
			};
			this.setRenderer = function(r) {
				if (!r.isInitialized()) {
					r.init({
						count: analyser.frequencyBinCount,
						width: width,
						height: height
					});
				} 
				renderer = r;
			};
			this.isPlaying = function() {
				return running;
			}

			var renderFrame = function() {
				analyser.getByteFrequencyData(frequencyData);
				renderer.renderFrame(frequencyData);
				if (running) {
					requestAnimationFrame(renderFrame);
				}
			};

			init();

		};

		function changeFFTSize() {
			globalFFTSize = parseInt(document.getElementById('fftSize').value);
		}

		function changeAudio(audioSrc) {
			if(visual) {
				visual.stop();
			}
			document.getElementById('audioIn').src = audioSrc;
			document.getElementById('startstop').className = 'glyphicon glyphicon-play'
		}

		function changeColor() {
			switch(document.getElementById('colorSelect').value) {
				case 'pop':
					barColor = 'linear-gradient(rgb(238,114,252), rgb(142,152,204))';
					break;
				case 'rock':
					barColor = 'linear-gradient(rgb(150,0,0), red)';
					break;
				case 'relaxing':
					barColor = 'linear-gradient(rgb(230,230,230), rgb(57,143,203))';
					break;
				case 'electronic':
					barColor = 'linear-gradient(red, blue)';
					break;
				case 'default':
					barColor = 'linear-gradient(rgb(0,0,0), rgb(200,200,200))';
					break;
			}
		}

window.onload = function() {
		var rect = document.getElementById('bars').getBoundingClientRect();
		console.log(rect.top, rect.right, rect.bottom, rect.left);
		document.getElementById('initiator').style.width = window.innerWidth;
		console.log(window.innerWidth);
		document.getElementById('initiator').style.height = 500;
		console.log(window.innerHeight-rect.top);
		document.getElementById('bars').style.width = window.innerWidth;
		console.log(window.innerWidth);
		document.getElementById('bars').style.height = 500;

		for(var i=0; i<vis.length; i++) {
			vis[i].onclick = (function() {

				return function() {
					var visWindow = this;
					var id = visWindow.parentNode.id;

						if (!visual) {
							visual = new Visualization({renderer: renderers[id] });
						}
						visual.setRenderer(renderers[id]);
						if (visual.isPlaying()) {
							visual.stop();
							visWindow.style.backgroundColor = 'rgba(255,255,255,0.5)';
						} else {
							visual.start();
							visWindow.style.backgroundColor = 'rgba(0,0,0,0)';
						}
					lastVisWindowParentId = id;
					lastVisWindow = visWindow;
				};
			})();
		}
		updateList();
	};
</script>

<h1 id='allgames' class='jumbotron text-center'>All Games</h1>
<div id='virt-arena'></div><br><br>

	<h1 class='center col-md-12'>Virtual Arena</h1>
	<div class='col-md-6'>
		<a href='/img/VirtArenaScreenshot.jpg'><img src='/img/VirtArenaScreenshot.jpg' class='project-image'></a><br>
	</div>
	<div class='col-md-6'>
		<a href='/img/VirtArenaScreenshot2.jpg'><img src='/img/VirtArenaScreenshot2.jpg' class='project-image'></a><br>
	</div>
	<div class='col-md-3'></div>
	<div class='col-md-6 project-container'>
		<p><b class='largefont'>Virtual Arena</b><br>
			Personal Project<br></p><br>
			<p><b>Role</b> <br>UI Designer, Programmer</p>
			<p><b>Tools</b> <br>HTML, CSS, Javascript, jQuery, Photoshop</p>
			<p><b>Timeline</b> <br>April 2014 - August 2014<br></p><br>
		<p>Notes:</p>
		<ul>
			<li>Board game ported to HTML, requiring a graphical user interface for player interaction and feedback.</li>
						<li>Focused on the technical development of a game, including artificial intelligence, pathfinding, graphic rendering, and interactivity.</li>
			<li>Great learning experience for UI, player feedback design, and programming.</li>
		</ul>
	</div>
	<div class='col-md-3'></div>


	<div class='blockline col-md-12' id='warring-states'></div>

	<h1 class='center col-md-12'>Warring States</h1>
	<div class='col-md-6'>
		<a href='/img/Iberia.jpg'><img src='/img/Iberia.jpg' class='project-image'></a><br>
	</div>
	<div class='col-md-6'>
		<a href='/image/EastAsia.jpg'><img src='/img/EastAsia.jpg' class='project-image'></a><br>
	</div>
	<div class='col-md-3'></div>
	<div class='col-md-6 project-container'>
		<p><b class='largefont'>Warring States</b><br>
			Mod, Europa Universalis IV<br>
			<a href='http://steamcommunity.com/sharedfiles/filedetails/?id=185238907' class='center'>Steam Workshop Page</a><br>
			<a href='https://www.youtube.com/watch?v=nB7RYEVuku4' class='center'>Youtube Highlight by Shenryyr</a><br>
			</p><br>
			<p><b>Role</b> <br>Team Leader, Map & Event Designer, Programmer</p>
			<p><b>Tools</b> <br>Scripting, Photoshop<br></p>
			<p><b>Timeline</b> <br>August 2013 - Present</p>
			<p><b>Stats</b> <br>13,500+ Subscribers<br>
			12th All-Time Most Popular Mod</p><br>
		<p>Notes:</p>
		<ul>
			<li>Placed an emphasis on creating unique and challenging gameplay situations inspired by a variety of historical eras.</li>
			<li>Created dynamic political landscapes in which a wide variety of claimants could reasonably become great powers.</li>
			<li>Enhanced the political system including a greater variety and significance of government types, dynastic takeovers, assassination, and a more nuanced approach to vassals.</li>
		</ul>
	</div>
	<div class='col-md-3'></div>


	<div class='blockline col-md-12' id='coh2-guide'></div><br><br>
				
	<div class='col-md-3'></div>
	<div class='col-md-6 project-container'>
		<p class='center'><b class='largefont'>Company of Heroes 2 Prima Official eGuide</b><br>
			Game Guide<br></p><br>
			<p><b>Role</b> <br>Writer, Campaign & Theater of War</p>
			<p><b>Tools</b> <br>Word, Photoshop</p>
			<p><b>Timeline</b> <br>May 2013 - July 2013</p><br>
		<p>Notes:</p>
		<ul>
			<li>Chosen to write for the guide due to positive community reputation, player skill, and previous guide-writing experience.</li>
			<li>Focused on user experience and player mentality with an emphasis on clarity and cohesion in my writing.</li>
			<li>Collaborated with an editor and web developer during the product cycle.</li>
		</ul>
	</div>
	<div class='col-md-3'></div>

</body>
</html>

